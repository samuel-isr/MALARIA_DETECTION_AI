<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malaria Detection AI</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        :root {
            --bg-color: #0A0A0F;
            --text-color: #EAEAEF;
            --text-secondary-color: #A0A0B0;
            --primary-color: #007FFF;
            --card-bg-color: rgba(28, 28, 30, 0.6);
            --border-color: rgba(255, 255, 255, 0.1);
            --success-color: #34C759;
            --danger-color: #FF3B30;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 15% 25%, rgba(0, 127, 255, 0.15), transparent 40%),
                radial-gradient(circle at 85% 75%, rgba(100, 80, 255, 0.15), transparent 40%);
            animation: moveGradient 20s ease-in-out infinite;
        }

        @keyframes moveGradient {
            0%, 100% { background-position: 0% 50%, 100% 50%; }
            50% { background-position: 100% 50%, 0% 50%; }
        }
        body::-webkit-scrollbar { width: 10px; }
        body::-webkit-scrollbar-track { background: var(--bg-color); }
        body::-webkit-scrollbar-thumb { background-color: #2c2c2e; border-radius: 20px; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 24px; }
        .section { padding: 100px 0; position: relative; }
        .hero-section { min-height: 100vh; display: flex; align-items: center; text-align: center; }
        h1 {
            font-size: clamp(3rem, 7vw, 5rem);
            font-weight: 700;
            line-height: 1.1;
            letter-spacing: -0.04em;
            background: -webkit-linear-gradient(45deg, #FFFFFF, #A0A0B0);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        h2 {
            font-size: clamp(2.2rem, 5vw, 3.2rem);
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
            letter-spacing: -0.03em;
        }
        .hero-subhead {
            font-size: 1.25rem;
            max-width: 650px;
            margin: 24px auto 0;
            line-height: 1.6;
            color: var(--text-secondary-color);
        }
        p { font-size: 1.1rem; line-height: 1.7; color: var(--text-secondary-color); }
        .section-content { max-width: 800px; margin: 0 auto; text-align: center; }
        nav {
            padding: 20px 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            z-index: 1000;
            transition: background-color 0.3s ease, border-bottom 0.3s ease;
        }
        nav.scrolled {
            background-color: rgba(10, 10, 15, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
        }
        .nav-container { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo { display: flex; align-items: center; gap: 12px; font-weight: 500; font-size: 1.1rem; }
        .logo svg { width: 28px; height: 28px; color: var(--text-color); }
        .nav-links { display: flex; gap: 24px; }
        .nav-links a { text-decoration: none; color: var(--text-secondary-color); font-size: 0.9rem; transition: color 0.2s ease; }
        .nav-links a:hover { color: var(--text-color); }
        .uploader-wrapper {
            background: var(--card-bg-color);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 40px;
            margin-top: 60px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        #drop-zone {
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            padding: 60px 30px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        #drop-zone.drag-over { background-color: rgba(0, 127, 255, 0.1); border-color: var(--primary-color); }
        #file-input { display: none; }
        .results-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
            margin-top: 30px;
            text-align: left;
        }
        @media (min-width: 768px) {
            .results-grid {
                grid-template-columns: 220px 1fr;
            }
        }
        #image-preview-container { display: none; }
        #image-preview { width: 100%; height: auto; border-radius: 16px; border: 1px solid var(--border-color); }
        .analysis-cards { display: none; flex-direction: column; gap: 24px; }
        .analysis-card { background: rgba(0,0,0,0.2); border-radius: 16px; padding: 24px; }
        .result-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 16px; }
        .result-item { display: flex; justify-content: space-between; align-items: center; font-size: 1rem; padding: 10px 0; border-bottom: 1px solid var(--border-color); }
        .result-item:last-child { border-bottom: none; }
        .result-label { color: var(--text-secondary-color); }
        .result-value { 
            font-weight: 500;
            text-align: right;
            word-break: break-all;
        }
        .result-value.positive { color: var(--success-color); }
        .result-value.negative { color: var(--danger-color); }
        #progress-bar-container { display: none; width: 100%; background-color: #3a3a3c; border-radius: 50px; margin-top: 30px; overflow: hidden; }
        #progress-bar { width: 0%; height: 10px; background-color: var(--primary-color); border-radius: 50px; }
        .instruction-text { font-size: 0.9rem; color: var(--text-secondary-color); margin-top: 16px; }

        .animate-on-scroll { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }
        .animate-on-scroll.stagger { transition-delay: 0.2s; }
        
        #explanation-text {
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: left;
        }
        #recommendations-list {
            list-style-type: none;
            text-align: left;
        }
        #recommendations-list li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        #recommendations-list li::before {
            content: 'âœ“';
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: 700;
        }
        .confidence-meter-container { text-align: center; }
        .prediction-display {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .prediction-display.positive { color: var(--success-color); }
        .prediction-display.negative { color: var(--danger-color); }
        .confidence-display {
            font-size: 1rem;
            color: var(--text-secondary-color);
            margin-bottom: 16px;
        }
        .confidence-bar-bg {
            width: 100%;
            height: 10px;
            background-color: var(--border-color);
            border-radius: 5px;
            overflow: hidden;
        }
        .confidence-bar-fg {
            width: 0%;
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease-out;
        }
        .confidence-bar-fg.positive { background-color: var(--success-color); }
        .confidence-bar-fg.negative { background-color: var(--danger-color); }

        .accuracy-meter-container {
            margin-top: 40px;
            text-align: center;
        }
        .accuracy-value {
            font-size: 3rem;
            font-weight: 700;
            color: var(--text-color);
        }
        .accuracy-label {
            font-size: 1rem;
            color: var(--text-secondary-color);
            margin-top: 8px;
        }
        .accuracy-bar-bg {
            width: 100%;
            max-width: 250px;
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            margin: 16px auto 0;
            overflow: hidden;
        }
        .accuracy-bar-fg {
            width: 0;
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 4px;
            transition: width 1.5s ease-out;
        }
        .accuracy-meter-container.is-visible .accuracy-bar-fg {
            width: 95.81%;
        }
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 40px;
            text-align: left;
        }
        .tech-card {
            background: rgba(28, 28, 30, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .tech-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .tech-card h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--text-color);
        }
        .tech-card p {
            font-size: 0.9rem;
            color: var(--text-secondary-color);
        }
        @media (max-width: 768px) {
            .nav-links { display: none; }
        }
    </style>
</head>
<body>
    <div class="parallax-bg"></div>
    <nav id="navbar">
        <div class="container nav-container">
            <div class="logo">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 3V1M12 23V21M21 12H23M1 12H3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Malaria Prediction AI
            </div>
            <div class="nav-links">
                <a href="#analyzer">Analyzer</a>
                <a href="#how-it-works">How It Works</a>
                <a href="#about-model">About Model</a>
            </div>
        </div>
    </nav>
    <main>
        <section class="hero-section">
            <div class="container">
                <div class="section-content animate-on-scroll">
                    <h1>Instant Malaria Cell Analysis.</h1>
                    <p class="hero-subhead">
                        Our advanced AI analyzes microscopic images to provide a highly accurate, near-instant prediction, aiding in the early detection of malaria.
                    </p>
                </div>
            </div>
        </section>
        <section id="analyzer" class="section">
            <div class="container">
                <div class="section-content">
                    <h2 class="animate-on-scroll">The Analyzer</h2>
                    <p class="animate-on-scroll stagger">Upload a microscopic image of a blood smear. Our AI will get to work, delivering a detailed analysis in seconds.</p>
                    <div class="uploader-wrapper animate-on-scroll stagger">
                        <div id="drop-zone">
                            <p>Drag & drop your image here, or click to select a file.</p>
                            <p class="instruction-text">For best results, please use a clear, focused image of a thin blood smear.</p>
                        </div>
                        <input type="file" id="file-input" accept="image/*">
                        <div id="progress-bar-container">
                            <div id="progress-bar"></div>
                        </div>
                        <div class="results-grid">
                            <div id="image-preview-container">
                                <img id="image-preview" src="#" alt="Image Preview">
                            </div>
                            <div class="analysis-cards" id="analysis-cards-container">
                                <div class="analysis-card" id="prediction-card">
                                    <h3 class="result-title">AI Prediction</h3>
                                    <div class="confidence-meter-container">
                                        <div id="prediction-display" class="prediction-display"></div>
                                        <div id="confidence-display" class="confidence-display"></div>
                                        <div class="confidence-bar-bg">
                                            <div id="confidence-bar-fg" class="confidence-bar-fg"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="analysis-card" id="explanation-card">
                                    <h3 class="result-title">AI Insight &amp; Recommendations</h3>
                                    <p id="explanation-text"></p>
                                    <ul id="recommendations-list"></ul>
                                </div>
                                <div class="analysis-card" id="properties-card">
                                    <h3 class="result-title">Image Properties</h3>
                                    <div class="result-item">
                                        <span class="result-label">Filename</span>
                                        <span id="filename-value" class="result-value"></span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">Dimensions</span>
                                        <span id="dimensions-value" class="result-value"></span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">File Size</span>
                                        <span id="filesize-value" class="result-value"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="how-it-works" class="section">
            <div class="container">
                <div class="section-content animate-on-scroll">
                    <h2>The Technology</h2>
                    <p>This tool uses a powerful deep learning model to classify cell images. It was built on a proven framework used for large-scale image recognition and adapted specifically for medical diagnosis, ensuring both high speed and accuracy.</p>
                </div>
            </div>
        </section>
        <section id="about-model" class="section">
            <div class="container">
                 <div class="section-content">
                    <h2 class="animate-on-scroll">Behind the AI</h2>
                    <p class="animate-on-scroll stagger">
                        Our predictive engine is built on a foundation of industry-leading technologies and methodologies to ensure high performance and reliability.
                    </p>
                    <div class="tech-grid animate-on-scroll stagger">
                        <div class="tech-card">
                            <h3>Python</h3>
                            <p>The core programming language for all backend logic and model training.</p>
                        </div>
                        <div class="tech-card">
                            <h3>TensorFlow & Keras</h3>
                            <p>The deep learning framework used to build, train, and deploy the AI model.</p>
                        </div>
                        <div class="tech-card">
                            <h3>Flask</h3>
                            <p>A lightweight web framework used to create the backend API that serves the model.</p>
                        </div>
                        <div class="tech-card">
                            <h3>MobileNetV2</h3>
                            <p>A state-of-the-art computer vision architecture that serves as the foundation of our AI.</p>
                        </div>
                        <div class="tech-card">
                            <h3>Transfer Learning</h3>
                            <p>The core technique of adapting a pre-trained model for our specific malaria detection task.</p>
                        </div>
                        <div class="tech-card">
                            <h3>Data Augmentation</h3>
                            <p>A process of artificially creating new training images to improve model robustness.</p>
                        </div>
                        <div class="tech-card">
                            <h3>CNN Architecture</h3>
                            <p>The fundamental model type (Convolutional Neural Network) used for image analysis.</p>
                        </div>
                        <div class="tech-card">
                            <h3>Image Preprocessing</h3>
                            <p>The critical first step of resizing and scaling images to prepare them for the AI model.</p>
                        </div>
                        <div class="tech-card">
                            <h3>Pillow</h3>
                            <p>A powerful library for opening, manipulating, and saving image files on the server.</p>
                        </div>
                    </div>
                    <div class="accuracy-meter-container animate-on-scroll stagger">
                        <div class="accuracy-value">95.81%</div>
                        <div class="accuracy-label">Validation Accuracy</div>
                        <div class="accuracy-bar-bg">
                            <div class="accuracy-bar-fg"></div>
                        </div>
                    </div>
                 </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="section-content animate-on-scroll">
                    <h2>For Educational Use Only</h2>
                    <p>This tool is a demonstration of AI capabilities in medical imaging and is intended for educational purposes. It is not a substitute for professional medical advice, diagnosis, or treatment. Please consult a qualified healthcare provider for any health concerns.</p>
                </div>
            </div>
        </section>
    </main>
    
    <footer style="text-align: center; padding: 40px 20px;">
        <p style="font-size: 0.9rem; color: var(--text-secondary-color);">I Samuel | 2025</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.2 });

            document.querySelectorAll('.animate-on-scroll').forEach(element => {
                observer.observe(element);
            });
            const nav = document.getElementById('navbar');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    nav.classList.add('scrolled');
                } else {
                    nav.classList.remove('scrolled');
                }
            });
            const dropZone = document.getElementById('drop-zone');
            const fileInput = document.getElementById('file-input');
            const imagePreviewContainer = document.getElementById('image-preview-container');
            const imagePreview = document.getElementById('image-preview');
            const progressBarContainer = document.getElementById('progress-bar-container');
            const progressBar = document.getElementById('progress-bar');
            const analysisCardsContainer = document.getElementById('analysis-cards-container');
            
            const predictionDisplay = document.getElementById('prediction-display');
            const confidenceDisplay = document.getElementById('confidence-display');
            const confidenceBarFg = document.getElementById('confidence-bar-fg');

            const filenameValue = document.getElementById('filename-value');
            const dimensionsValue = document.getElementById('dimensions-value');
            const filesizeValue = document.getElementById('filesize-value');
            
            const explanationText = document.getElementById('explanation-text');
            const recommendationsList = document.getElementById('recommendations-list');

            const API_URL = 'http://127.0.0.1:5000/predict';

            dropZone.addEventListener('click', () => fileInput.click());
            dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('drag-over'); });
            dropZone.addEventListener('dragleave', () => { dropZone.classList.remove('drag-over'); });
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                if (e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
            });
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) handleFile(e.target.files[0]);
            });

            function handleFile(file) {
                if (!file.type.startsWith('image/')) {
                    alert('Please upload an image file.');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                    const img = new Image();
                    img.onload = () => {
                        dimensionsValue.textContent = `${img.naturalWidth} x ${img.naturalHeight} px`;
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);

                filenameValue.textContent = truncateFilename(file.name);
                filesizeValue.textContent = `${(file.size / 1024).toFixed(2)} KB`;
                imagePreviewContainer.style.display = 'block';
                analysisCardsContainer.style.display = 'none';      
                progressBar.style.transition = 'none';
                progressBar.style.width = '0%';
                progressBarContainer.style.display = 'block';              
                void progressBar.offsetWidth;              
                progressBar.style.transition = 'width 1.5s ease-in-out';
                progressBar.style.width = '90%';                
                const formData = new FormData();
                formData.append('file', file);

                fetch(API_URL, {
                    method: 'POST',
                    body: formData,
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    progressBar.style.transition = 'width 0.5s ease-out';
                    progressBar.style.width = '100%';
                    setTimeout(() => {
                        showRealResults(data);
                    }, 600);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert(`Error connecting to the AI model. Please ensure the backend server is running. Details: ${error.message}`);
                    progressBarContainer.style.display = 'none';
                });
            }

            function showRealResults(data) {
                progressBarContainer.style.display = 'none';
                
                const isParasitized = data.prediction === 'Parasitized';
                const confidence = parseFloat(data.confidence);

                predictionDisplay.textContent = data.prediction;
                predictionDisplay.className = `prediction-display ${isParasitized ? 'negative' : 'positive'}`;
                confidenceDisplay.textContent = `Confidence: ${confidence.toFixed(2)}%`;
                confidenceBarFg.style.width = `${confidence}%`;
                confidenceBarFg.className = `confidence-bar-fg ${isParasitized ? 'negative' : 'positive'}`;
                
                const insights = getInsights(isParasitized);
                explanationText.textContent = insights.explanation;
                
                recommendationsList.innerHTML = '';
                insights.recommendations.forEach(rec => {
                    const li = document.createElement('li');
                    li.textContent = rec;
                    recommendationsList.appendChild(li);
                });

                analysisCardsContainer.style.display = 'flex';
            }

            function getInsights(isParasitized) {
                if (isParasitized) {
                    return {
                        explanation: "The AI detected visual characteristics consistent with a parasitic infection. This includes irregularities in the cell's shape, texture, and the potential presence of ring-form trophozoites within the red blood cell.",
                        recommendations: [
                            "This finding requires urgent attention.",
                            "Consult a healthcare professional immediately for a definitive diagnosis.",
                            "Do not self-medicate. Follow the guidance of a qualified doctor."
                        ]
                    };
                } else {
                    return {
                        explanation: "The AI analysis found that the cell appears normal and healthy. The cell's membrane, color, and internal structure are all within the typical range for an uninfected red blood cell.",
                        recommendations: [
                            "This is a positive sign, but not a definitive diagnosis.",
                            "Continue to monitor for any symptoms.",
                            "Always consult a healthcare professional for any health concerns."
                        ]
                    };
                }
            }

            function truncateFilename(name, maxLength = 20) {
                if (name.length <= maxLength) {
                    return name;
                }
                const start = name.substring(0, maxLength / 2 - 1);
                const end = name.substring(name.length - maxLength / 2 + 1);
                return `${start}...${end}`;
            }
        });
    </script>

</body>
</html>
